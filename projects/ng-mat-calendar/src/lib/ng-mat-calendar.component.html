<div class="calendar" *ngIf="events && options">
    <div class="calendar__toolbar">
         <button
            mat-stroked-button
            class="toolbar__button toolbar__button--today"
            color="primary"
            (click)="setCalendarToday()">
                Today
        </button>

        <button
            mat-icon-button
            class="toolbar__button"
            color="primary"
            (click)="setCalendar(-7)">
            <mat-icon>chevron_left</mat-icon>
        </button>

        <button
            mat-icon-button
            class="toolbar__button"
            color="primary"
            (click)="setCalendar(7)">
            <mat-icon>chevron_right</mat-icon>
        </button>

        <div class="toolbar__meta">
            <span class="toolbar__month">{{ selectedDateInfo.monthAndYear }}</span>
            <span class="toolbar__week">Week {{ selectedDateInfo.weeknumber }}</span>
        </div>

        <div class="toolbar__right">
            <button
                *ngIf="showSettings"
                mat-icon-button
                class="toolbar__button"
                color="primary"
                (click)="toggleSettings()">
                <mat-icon>settings</mat-icon>
            </button>
        </div>
    </div>

    <div class="calendar__content">
        <div class="calendar__days">
            <div class="calendar__day" *ngFor="let activeLane of calendar.activeDayLanes;">
                <div class="day__header" [ngClass]="{ 'day__header--today': isToday(activeLane.date) }">
                    <span class="day-name">{{ getDayName(activeLane.date) }}</span> 
                    <span class="day-number">{{ getDayNumber(activeLane.date) }}</span>
                </div>
            </div>
        </div>

        <div class="calendar__lanes">
            <div class="calendar__times" [style.height.px]="calculateGrid().height">
                <div class="time-unit" *ngFor="let time of times;" [style.height.px]="pixelsPerHour">
                    {{ time.time }}
                </div>
            </div>

            <div class="day__lane"
                *ngFor="let activeLane of calendar.activeDayLanes;"
                [style.height.px]="calculateGrid().height"
                [ngClass]="{ 'day__lane--today': isToday(activeLane.date) }">

                <div class="calendar__spy" *ngIf="isToday(activeLane.date)" [style.marginTop.px]="calculateSpy()"></div>
                
                <event-display
                    [component]="options.renderComponent"
                    [event]="event"
                    class="calendar__item"
                    *ngFor="let event of activeLane.events; let i = index"
                    [style.marginTop.px]="event.offset?.offsetTop"
                    [style.height.px]="event.offset?.durationOffset"
                    matTooltip="{{ event.title }} ({{ getTime(event.startTime) }} - {{ getTime(event.endTime) }})"
                    matTooltipPosition="right"
                    [matTooltipDisabled]="!enableTooltip"
                    (click)="onEventClick(event)">
                </event-display>
            </div>
        </div>
    </div>
</div>